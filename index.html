<!DOCTYPE html>
<html id="htmlroot" name="htmlroot">

<head>
</head>

<body>
  <!-- We will put our React component inside this div. -->
  <div id="like_button_container"></div>
  <div id="app_container"></div>

  <!-- Load React. -->
  <!-- Note: when deploying, replace "development.js" with "production.min.js". -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="app.js"></script>
  <script src="like_button.js"></script>

  <script>
    var target = document.getElementById("htmlroot");
    var observer = new MutationObserver(function (mutations) {
      mutations.forEach(function (mutation) {
        localStorage.setItem('content', JSON.stringify(document.getElementsByName("content").outerHTML));
      });
    });
    var config = { characterData: true, attributes: false, childList: true, subtree: false };
    observer.observe(target, config);
    addEventListener('mousedown', (event) => {
      if (event.target.hasAttribute('data-content-editable')) {
        console.log("mousedown: has data-content-editable attribute");
        event.target.contentEditable = true;
      }
    });
    addEventListener('click', (event) => {
      if (event.target.hasAttribute('data-content-editable')) {
        console.log("click: has data-content-editable attribute");
      }
    });
  </script>
  <div id="root">
    Loading...
    <noscript>
      JavaScript is required.
    </noscript>
  </div>
  <script type="module">
    import React from "https://unpkg.com/es-react@latest/dev/react.js";
    import ReactDOM from "https://unpkg.com/es-react@latest/dev/react-dom.js";
    import PropTypes from "https://unpkg.com/es-react@latest/dev/prop-types.js";
    import htm from "https://unpkg.com/htm@latest?module";
    const html = htm.bind(React.createElement);
    const App = (props) => {
      return html`
      <div>
        <div>Welcome to Edit${props.able}
        </div>   
        <div data-content-editable name="content">
          Please click and type something in here
        </div>
      </div>`;
    }
    ReactDOM.render(
      html`<${App} able=${"Able"} />`,
      document.getElementById("root"));
  </script>
</body>

</html>